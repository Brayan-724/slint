// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: MIT

import { TaskListView, TaskListAdapter } from "./views/task_list_view.slint";
export { TaskListAdapter }

import { CreateTaskView, CreateTaskAdapter } from "./views/create_task_view.slint";
export { CreateTaskAdapter }

import { AnimationSettings } from "./widgets/styling.slint";

export global NavigationAdapter {
    out property <int> current-page;

    public function next-page() {
        root.current-page += 1;
    }

    public function previous-page() {
        root.current-page = max(0, root.current-page - 1);
    }
}

export component MainWindow inherits Window {
    preferred-width: 400px;
    preferred-height: 600px;
    title: "Slint todo mvc example";

    layout := Rectangle {
        x: -(NavigationAdapter.current-page * root.width);
        width: 2 * root.width;

        if layout.x > -root.width : TaskListView {
            x: 0;
            y: 0;
            width: root.width;
            height: root.height;
        }

        if NavigationAdapter.current-page == 1  : CreateTaskView {
            x: root.width;
            y: 0;
            width: root.width;
            height: root.height;
        }

        animate x {
             duration: AnimationSettings.move-duration;
             easing: AnimationSettings.move-easing;
        }
    }
}
