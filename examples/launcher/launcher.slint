import { AboutSlint , VerticalBox, Button, HorizontalBox} from "std-widgets.slint";


Launcher := Window {
    width: 480px;
    height: 272px;

    pure callback quit();
    background: black;
    property <int> to_launch;


    property <[{ title: string, icon: image, text: string }]> demos : [
        {title: "Printer demo", icon: @image-url("printer.svg") },
        {title: "Slide puzzle", icon: @image-url("gamepad.svg") },
        {title: "Memory game", icon: @image-url("brain.svg") },
    ];

    HorizontalLayout {
        height: 60%;
        width: 100%;
        spacing: 20px;
        padding: 20px;
        for d[idx] in demos: rect := Rectangle {
            property <bool> activated: to-launch == idx+1;
            background: !touch.pressed ? ((to-launch != 0) ? transparent : #131619) : #2c2f36;
            animate background { duration: 70ms;  }
            touch := TouchArea {
                clicked => { to-launch = idx + 1; }
            }
            VerticalLayout {
                padding: 5px;
                Rectangle {
                    background: {
                        // Workaround to quit after the animation
                        if (img.width >= self.width*2) {
                            quit();
                            return transparent;
                        };
                        transparent;
                    }
                    img := Image {
                        source: d.icon;
                        width: rect.activated ? parent.width*2 : parent.width;
                        height: rect.activated ? parent.height*2 : parent.height;
                        x: (parent.width - width) / 2;
                        y: (parent.height - height) / 2;
                        animate width, height, opacity { duration: 150ms; easing: ease-in; }
                        opacity: to-launch == 0 ? 1 : 0.8;
                        image-fit: contain;
                    }
                }

                Text {
                    text: d.title;
                    color: white;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    font-size: 18px;
                    z: -1;
                }
            }
        }


    }



    /*VerticalBox {
        width: 50%;
        alignment: start;

    }*/

    Image {
        source: @image-url("../../logo/slint-logo-simple-dark.svg");
        //width: 25%;
        //height: 50%;
        x: parent.width - width - 10px;
        y: parent.height - height - 10px;
    }

   /* AboutSlint {
        width: 50%;
        height: 50%;
        x: parent.width - width;
        y: parent.height - height;
    }*/

}
